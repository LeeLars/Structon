<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Canonical Tag Test</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 1200px;
      margin: 40px auto;
      padding: 20px;
      background: #f5f5f5;
    }
    .test-card {
      background: white;
      padding: 20px;
      margin-bottom: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .test-url {
      font-family: monospace;
      background: #f0f0f0;
      padding: 10px;
      border-radius: 4px;
      margin: 10px 0;
      word-break: break-all;
    }
    .result {
      padding: 10px;
      margin: 10px 0;
      border-radius: 4px;
    }
    .success {
      background: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }
    .error {
      background: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }
    button {
      background: #236773;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
    }
    button:hover {
      background: #1a4f59;
    }
    h1 {
      color: #236773;
    }
    .info {
      background: #d1ecf1;
      color: #0c5460;
      padding: 15px;
      border-radius: 4px;
      margin-bottom: 20px;
    }
  </style>
</head>
<body>
  <h1>üîç Canonical Tag Test Suite</h1>
  
  <div class="info">
    <strong>Test Doel:</strong> Verifi√´ren dat canonical tags altijd clean zijn (zonder query parameters) en correct verwijzen naar de huidige pagina.
  </div>

  <div class="test-card">
    <h2>Test URLs</h2>
    <p>Klik op de button om de canonical tags te testen voor verschillende URL scenario's:</p>
    <button onclick="runTests()">‚ñ∂Ô∏è Start Tests</button>
    <div id="results"></div>
  </div>

  <script>
    const testUrls = [
      {
        name: 'Homepage zonder parameters',
        url: 'https://leelars.github.io/Structon/be-nl/',
        expected: 'https://leelars.github.io/Structon/be-nl/'
      },
      {
        name: 'Producten pagina met category parameter',
        url: 'https://leelars.github.io/Structon/be-nl/producten/graafbakken/?cat=graafbakken',
        expected: 'https://leelars.github.io/Structon/be-nl/producten/graafbakken/'
      },
      {
        name: 'Producten pagina met meerdere parameters',
        url: 'https://leelars.github.io/Structon/be-nl/producten/?cat=graafbakken&filter=hardox',
        expected: 'https://leelars.github.io/Structon/be-nl/producten/'
      },
      {
        name: 'Merk pagina met tracking parameter',
        url: 'https://leelars.github.io/Structon/be-nl/kraanbakken/caterpillar/?utm_source=google',
        expected: 'https://leelars.github.io/Structon/be-nl/kraanbakken/caterpillar/'
      },
      {
        name: 'Industrie pagina met hash',
        url: 'https://leelars.github.io/Structon/be-nl/industrieen/grondwerkers/#producten',
        expected: 'https://leelars.github.io/Structon/be-nl/industrieen/grondwerkers/'
      },
      {
        name: 'FR locale met parameters',
        url: 'https://leelars.github.io/Structon/be-fr/producten/?cat=godets',
        expected: 'https://leelars.github.io/Structon/be-fr/producten/'
      },
      {
        name: 'DE locale met parameters',
        url: 'https://leelars.github.io/Structon/de-de/producten/?cat=baggerloeffel',
        expected: 'https://leelars.github.io/Structon/de-de/producten/'
      }
    ];

    function getCleanUrl(urlString) {
      const url = new URL(urlString);
      return url.origin + url.pathname;
    }

    function runTests() {
      const resultsDiv = document.getElementById('results');
      resultsDiv.innerHTML = '<h3>Test Resultaten:</h3>';

      let passedTests = 0;
      let failedTests = 0;

      testUrls.forEach((test, index) => {
        const cleanUrl = getCleanUrl(test.url);
        const passed = cleanUrl === test.expected;
        
        if (passed) passedTests++;
        else failedTests++;

        const resultHtml = `
          <div class="result ${passed ? 'success' : 'error'}">
            <strong>Test ${index + 1}: ${test.name}</strong>
            <div class="test-url"><strong>Input URL:</strong><br>${test.url}</div>
            <div class="test-url"><strong>Expected Canonical:</strong><br>${test.expected}</div>
            <div class="test-url"><strong>Actual Canonical:</strong><br>${cleanUrl}</div>
            <div><strong>Status:</strong> ${passed ? '‚úÖ PASSED' : '‚ùå FAILED'}</div>
          </div>
        `;
        resultsDiv.innerHTML += resultHtml;
      });

      // Summary
      const summaryHtml = `
        <div class="result ${failedTests === 0 ? 'success' : 'error'}">
          <h3>üìä Test Samenvatting</h3>
          <p><strong>Totaal tests:</strong> ${testUrls.length}</p>
          <p><strong>‚úÖ Geslaagd:</strong> ${passedTests}</p>
          <p><strong>‚ùå Gefaald:</strong> ${failedTests}</p>
          <p><strong>Slagingspercentage:</strong> ${Math.round((passedTests / testUrls.length) * 100)}%</p>
        </div>
      `;
      resultsDiv.innerHTML += summaryHtml;
    }

    // Auto-run tests on load
    window.addEventListener('load', () => {
      setTimeout(runTests, 500);
    });
  </script>
</body>
</html>
