<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Structon - Redirecting...</title>
  
  <!-- Prevent indexing of redirect page -->
  <meta name="robots" content="noindex, nofollow">
  
  <!-- Hreflang for language alternatives -->
  <link rel="alternate" hreflang="nl-BE" href="https://structon.be/be-nl/">
  <link rel="alternate" hreflang="nl-NL" href="https://structon.be/nl-nl/">
  <link rel="alternate" hreflang="fr-BE" href="https://structon.be/be-fr/">
  <link rel="alternate" hreflang="de-DE" href="https://structon.be/de-de/">
  <link rel="alternate" hreflang="x-default" href="https://structon.be/be-nl/">
  
  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="assets/images/static/favicon.svg">
  
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
      font-family: 'Arthouse', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #236773 0%, #1a4f59 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
    }
    
    .redirect-container {
      text-align: center;
      padding: 2rem;
    }
    
    .logo {
      width: 120px;
      height: auto;
      margin-bottom: 2rem;
      filter: brightness(0) invert(1);
    }
    
    .spinner {
      width: 40px;
      height: 40px;
      border: 3px solid rgba(255,255,255,0.3);
      border-top-color: #fff;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 1.5rem;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    h1 {
      font-size: 1.25rem;
      font-weight: 500;
      margin-bottom: 0.5rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
    
    p {
      font-size: 0.875rem;
      opacity: 0.8;
    }
    
    .language-fallback {
      margin-top: 3rem;
      padding-top: 2rem;
      border-top: 1px solid rgba(255,255,255,0.2);
    }
    
    .language-fallback p {
      margin-bottom: 1rem;
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
    }
    
    .language-links {
      display: flex;
      gap: 1rem;
      justify-content: center;
      flex-wrap: wrap;
    }
    
    .language-links a {
      color: #fff;
      text-decoration: none;
      padding: 0.5rem 1rem;
      border: 1px solid rgba(255,255,255,0.3);
      border-radius: 4px;
      font-size: 0.875rem;
      transition: all 0.2s ease;
    }
    
    .language-links a:hover {
      background: rgba(255,255,255,0.1);
      border-color: rgba(255,255,255,0.5);
    }
  </style>
  
  <script>
    (function() {
      // Configuration
      var CONFIG = {
        locales: ['be-nl', 'nl-nl', 'be-fr', 'de-de'],
        defaultLocale: 'be-nl',
        storageKey: 'structon_locale',
        languageMapping: {
          'nl-be': 'be-nl',
          'nl-nl': 'nl-nl',
          'nl': 'be-nl',
          'fr-be': 'be-fr',
          'fr-lu': 'be-fr',
          'fr': 'be-fr',
          'de-de': 'de-de',
          'de-at': 'de-de',
          'de-lu': 'de-de',
          'de': 'de-de',
          'en': 'be-nl'
        }
      };
      
      // Get base path (handles GitHub Pages /Structon/ prefix)
      function getBasePath() {
        var path = window.location.pathname;
        if (path.indexOf('/Structon/') === 0 || path === '/Structon') {
          return '/Structon/';
        }
        return '/';
      }
      
      // Check if already on a locale path
      function getCurrentLocale() {
        var path = window.location.pathname;
        var basePath = getBasePath();
        var pathAfterBase = path.replace(basePath, '');
        
        for (var i = 0; i < CONFIG.locales.length; i++) {
          if (pathAfterBase.indexOf(CONFIG.locales[i] + '/') === 0 || pathAfterBase === CONFIG.locales[i]) {
            return CONFIG.locales[i];
          }
        }
        return null;
      }
      
      // Get stored locale preference
      function getStoredLocale() {
        try {
          var stored = localStorage.getItem(CONFIG.storageKey);
          if (stored && CONFIG.locales.indexOf(stored) !== -1) {
            return stored;
          }
        } catch (e) {}
        return null;
      }
      
      // Save locale preference
      function setStoredLocale(locale) {
        try {
          localStorage.setItem(CONFIG.storageKey, locale);
        } catch (e) {}
      }
      
      // Detect browser locale
      function detectBrowserLocale() {
        var languages = navigator.languages || [navigator.language || navigator.userLanguage || ''];
        
        for (var i = 0; i < languages.length; i++) {
          var lang = languages[i].toLowerCase();
          
          // Try exact match
          if (CONFIG.languageMapping[lang]) {
            return CONFIG.languageMapping[lang];
          }
          
          // Try language only (without region)
          var langOnly = lang.split('-')[0];
          if (CONFIG.languageMapping[langOnly]) {
            return CONFIG.languageMapping[langOnly];
          }
        }
        
        return CONFIG.defaultLocale;
      }
      
      // Main redirect logic
      function redirect() {
        // If already on a locale path, don't redirect
        if (getCurrentLocale()) {
          return;
        }
        
        var targetLocale;
        
        // 1. Check stored preference
        targetLocale = getStoredLocale();
        
        // 2. Detect from browser
        if (!targetLocale) {
          targetLocale = detectBrowserLocale();
        }
        
        // 3. Save preference and redirect
        setStoredLocale(targetLocale);
        
        var basePath = getBasePath();
        var targetUrl = basePath + targetLocale + '/';
        
        window.location.replace(targetUrl);
      }
      
      // Execute redirect
      redirect();
    })();
  </script>
  
  <!-- Fallback for no JavaScript -->
  <noscript>
    <meta http-equiv="refresh" content="0;url=/be-nl/">
  </noscript>
</head>
<body>
  <div class="redirect-container">
    <img src="assets/images/static/logo.svg" alt="Structon" class="logo">
    <div class="spinner"></div>
    <h1>Even geduld...</h1>
    <p>We sturen je door naar de juiste taal.</p>
    
    <div class="language-fallback">
      <p>Of kies handmatig:</p>
      <div class="language-links">
        <a href="/be-nl/">ðŸ‡§ðŸ‡ª Nederlands</a>
        <a href="/be-fr/">ðŸ‡§ðŸ‡ª FranÃ§ais</a>
        <a href="/nl-nl/">ðŸ‡³ðŸ‡± Nederlands</a>
        <a href="/de-de/">ðŸ‡©ðŸ‡ª Deutsch</a>
      </div>
    </div>
  </div>
</body>
</html>
